singularity {
    enabled = true
    runOptions = "--bind /fs1/ --bind /local/ --bind /mnt/beegfs/ --bind /fs2/"
}

process {
    executor = 'slurm'
    queue = 'grace-lowest'

    withLabel: process_low {
        cpus = 4
        memory = 4.GB
        time = 1.h
    }
    withLabel: process_medium {
        cpus = 12
        memory = 12.GB
        time = 4.h
    }
    withLabel: process_high {
        cpus = 40
        memory = 40.GB
        time = 24.h
    }
}

params {
    csv = "dummy.csv"
    score_thres = "test"
    snv_calls = "test"

    hgnc_map = "/fs1/jakob/proj/240613_run_tomte/load_cases/2_drop/hgnc_symbol_to_id_240927.tsv"
    cadd = "${refpath}/annotation_dbs/CADD_v1.7/whole_genome_SNVs.tsv.gz"
    cadd_tbi = "${refpath}/annotation_dbs/CADD_v1.7/whole_genome_SNVs.tsv.gz.tbi"
    score_config = "/fs1/resources/scout/rank_models_38/rank_model_v5.2.1_single__VEP111.ini"

    containers = [
        base: "/fs1/resources/containers/wgs_2021-03-16.sif",
        genmod: "/fs1/resources/containers/genmod_v3.9.sif",
        vep: "/fs1/resources/containers/ensembl-vep_release_111.0.sif",
        cadd: "/fs1/resources/containers/cadd_v1.6.sif"
    ]

    refpath = "/fs1/resources/ref/hg38/"
    VEP_DIR = "${refpath}/vep/vep111.0"
    vep = [
        VEP_SYNONYMS: "${VEP_DIR}/synonyms",
        VEP_FASTA: "${VEP_DIR}/homo_sapiens_merged/111_GRCh38/Homo_sapiens.GRCh38.dna.toplevel.fa.gz",
        VEP_CACHE: "${VEP_DIR}",
        VEP_PLUGINS: "${VEP_DIR}/Plugins",
        VEP_TRANSCRIPT_DISTANCE: "e",
        CADD: "${refpath}/annotation_dbs/CADD_v1.7/whole_genome_SNVs.tsv.gz",
        DBNSFP: "${refpath}/annotation_dbs/dbnsfp/dbNSFP4.3a_grch38.gz",
        GNOMAD_EXOMES: "${refpath}/annotation_dbs/gnomad_2.1/gnomad.exomes.r2.1.sites.grch38.ALLchr.minified.sort.vcf.gz",
        GNOMAD_GENOMES: "${refpath}/annotation_dbs/gnomad_2.1_genomes/gnomad_genomes_2.1_hg38_minified.miniheader.vcf.gz",
        GNOMAD_MT: "${refpath}/annotation_dbs/gnomad_3.1/gnomad.genomes.v3.1.sites.MT.vcf.bgz",
        MAXENTSCAN: "${VEP_PLUGINS}/MaxEntScan_scripts",
        PHYLOP: "${refpath}/annotation_dbs/hg38.phyloP100way.bw",
        PHASTCONS: "${refpath}/annotation_dbs/hg38.phastCons100way.bw"
    ]
}
